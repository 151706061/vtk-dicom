PROJECT(DICOM)

# CMake version requirements
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

# Look for a VTK build directory
FIND_PACKAGE(VTK)
IF (VTK_FOUND)
  INCLUDE (${VTK_USE_FILE})
ENDIF (VTK_FOUND)

FIND_PACKAGE(GDCM)
IF(NOT GDCM_DIR)
  MESSAGE(FATAL_ERROR "Please set GDCM_DIR.")
ENDIF(NOT GDCM_DIR)
IF(GDCM_FOUND)
INCLUDE(${GDCM_USE_FILE})
ENDIF(GDCM_FOUND)

SET(LIB_SRCS
  vtkDICOMMetaData.cxx
  vtkDICOMDictionary.cxx
  vtkDICOMTag.cxx
  vtkDICOMTagVector.cxx
  vtkDICOMVR.cxx
  vtkDICOMVM.cxx
  vtkDICOMDataElement.cxx
  vtkDICOMDictEntry.cxx
  vtkDICOMParser.cxx
  vtkDICOMSequence.cxx
  vtkDICOMItem.cxx
  vtkDICOMSorter.cxx
  vtkDICOMValue.cxx
)

ADD_LIBRARY(DataManager ${LIB_SRCS})
TARGET_LINK_LIBRARIES(DataManager vtkCommon gdcmMSFF)

ADD_EXECUTABLE(TestDICOMParser TestDICOMParser.cxx)
TARGET_LINK_LIBRARIES(TestDICOMParser DataManager)

ADD_EXECUTABLE(TestDICOMMetaData TestDICOMMetaData.cxx)
TARGET_LINK_LIBRARIES(TestDICOMMetaData DataManager)

ADD_EXECUTABLE(TestDICOMVR TestDICOMVR.cxx)
TARGET_LINK_LIBRARIES(TestDICOMVR DataManager)

ADD_EXECUTABLE(TestDICOMValue TestDICOMValue.cxx)
TARGET_LINK_LIBRARIES(TestDICOMValue DataManager)

ADD_EXECUTABLE(TestDICOMSequence TestDICOMSequence.cxx)
TARGET_LINK_LIBRARIES(TestDICOMSequence DataManager)

ADD_EXECUTABLE(TestDICOMSorter TestDICOMSorter.cxx)
TARGET_LINK_LIBRARIES(TestDICOMSorter DataManager)
