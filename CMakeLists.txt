PROJECT(DICOM)

# CMake version requirements
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

# Look for a VTK build directory
FIND_PACKAGE(VTK)
IF (VTK_FOUND)
  INCLUDE (${VTK_USE_FILE})
ENDIF (VTK_FOUND)

FIND_PACKAGE(GDCM)
IF(NOT GDCM_DIR)
  MESSAGE(FATAL_ERROR "Please set GDCM_DIR.")
ENDIF(NOT GDCM_DIR)
IF(GDCM_FOUND)
INCLUDE(${GDCM_USE_FILE})
ENDIF(GDCM_FOUND)

SET(LIB_SRCS
  vtkDICOMMetaData.cxx
  vtkDICOMDictionary.cxx
  vtkDICOMTag.cxx
  vtkDICOMVR.cxx
  vtkDICOMVM.cxx
  vtkDICOMDataElement.cxx
  vtkDICOMDictEntry.cxx
  vtkDICOMParser.cxx
  vtkDICOMReader.cxx
  vtkDICOMSequence.cxx
  vtkDICOMItem.cxx
  vtkDICOMSorter.cxx
  vtkDICOMReferenceCount.cxx
  vtkDICOMValue.cxx
  vtkNIFTIReader.cxx
  vtkNIFTIWriter.cxx
)

ADD_DEFINITIONS(-DVTK_DICOM_USE_GDCM)

ADD_LIBRARY(vtkDICOM ${LIB_SRCS})
TARGET_LINK_LIBRARIES(vtkDICOM vtkIO gdcmMSFF vtkzlib)

ADD_EXECUTABLE(TestDICOMParser TestDICOMParser.cxx)
TARGET_LINK_LIBRARIES(TestDICOMParser vtkDICOM)

ADD_EXECUTABLE(TestDICOMMetaData TestDICOMMetaData.cxx)
TARGET_LINK_LIBRARIES(TestDICOMMetaData vtkDICOM)

ADD_EXECUTABLE(TestDICOMVR TestDICOMVR.cxx)
TARGET_LINK_LIBRARIES(TestDICOMVR vtkDICOM)

ADD_EXECUTABLE(TestDICOMValue TestDICOMValue.cxx)
TARGET_LINK_LIBRARIES(TestDICOMValue vtkDICOM)

ADD_EXECUTABLE(TestDICOMSequence TestDICOMSequence.cxx)
TARGET_LINK_LIBRARIES(TestDICOMSequence vtkDICOM)

ADD_EXECUTABLE(TestDICOMSorter TestDICOMSorter.cxx)
TARGET_LINK_LIBRARIES(TestDICOMSorter vtkDICOM)

ADD_EXECUTABLE(TestDICOMReader TestDICOMReader.cxx)
TARGET_LINK_LIBRARIES(TestDICOMReader vtkDICOM)

ADD_EXECUTABLE(TestDICOMDisplay TestDICOMDisplay.cxx)
TARGET_LINK_LIBRARIES(TestDICOMDisplay vtkDICOM vtkRendering)

ADD_EXECUTABLE(TestNIFTIDisplay TestNIFTIDisplay.cxx)
TARGET_LINK_LIBRARIES(TestNIFTIDisplay vtkDICOM vtkRendering)
